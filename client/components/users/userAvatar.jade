template(name="userAvatar")
  a.member(class="js-{{#if assignee}}assignee{{else}}member{{/if}}" title="{{#if userData}}{{userData.profile.fullname}} ({{userData.username}}) {{_ memberType}}{{/if}}")
    if userData
      if userData.profile.avatarUrl
        img.avatar.avatar-image(src="{{avatarUrl}}")
      else
        +userAvatarInitials(userId=userData._id)
    else
      +userAvatarInitials(userId=this.userId)

    if showStatus
      span.member-presence-status(class=presenceStatusClassName)
      span.member-type(class=memberType)

    unless isSandstorm
      if showEdit
        if $eq currentUser._id userData._id
          a.edit-avatar.js-change-avatar
            i.fa.fa-pencil-square-o

template(name="userAvatarInitials")
  .avatar-initials
    = initials

template(name="orgAvatar")
  a.member.orgOrTeamMember(class="js-member" title="{{orgData.orgDisplayName}}")
    +boardOrgName(orgId=orgData._id)

template(name="boardOrgRow")
  tr
    if orgData.orgIsActive
      td {{ orgData.orgDisplayName }}
    else
      td <s>{{ orgData.orgDisplayName }}</s>
    td
      if currentUser.isBoardAdmin
        a.member.orgOrTeamMember.add-member.js-manage-board-removeOrg(title="{{_ 'remove-from-board'}}")
          i.removeTeamFaMinus
            | ➖
        .divaddfaplusminus
          | {{_ 'remove-btn'}}

template(name="boardTeamRow")
  tr
    if teamData.teamIsActive
      td {{ teamData.teamDisplayName }}
    else
      td <s>{{ teamData.teamDisplayName }}</s>
    td
      if currentUser.isBoardAdmin
        a.member.orgOrTeamMember.add-member.js-manage-board-removeTeam(title="{{_ 'remove-from-board'}}")
          i.removeTeamFaMinus
            | ➖
        .divaddfaplusminus
          | {{_ 'remove-btn'}}

template(name="boardOrgName")
  svg.avatar.avatar-initials(viewBox="0 0 {{orgViewPortWidth}} 15")
    text(x="50%" y="11" text-anchor="middle" dominant-baseline="middle" font-size="16")= orgName

template(name="teamAvatar")
  a.member.orgOrTeamMember(class="js-member" title="{{teamData.teamDisplayName}}")
    +boardTeamName(orgId=orgData._id)

template(name="boardTeamName")
  svg.avatar.avatar-initials(viewBox="0 0 {{teamViewPortWidth}} 15")
    text(x="50%" y="11" text-anchor="middle" dominant-baseline="middle" font-size="16")= teamName

template(name="userPopup")
  .board-member-menu
    .mini-profile-info
      +userAvatar(userId=user._id)
      .info
        h3= user.profile.fullname
        p.quiet @{{ user.username }}

template(name="memberName")
  if showBoth
    = user.profile.fullname
    | ({{ user.username }})
  else if user.profile.fullname
    = user.profile.fullname
  else
    = user.username

template(name="changeAvatarPopup")
  if error.get
    .warning {{_ error.get}}
  ul.pop-over-list
    each uploadedAvatars
      li: a.js-select-avatar
        .member
          img.avatar.avatar-image(src="{{link}}")
        if isSelected
          i.fa.fa-check
          p.sub-name
          a.js-delete-avatar {{_ 'delete'}}
          |  -
          = name
    li: a.js-select-initials
      .member
        +userAvatarInitials(userId=currentUser._id)
      | {{_ 'initials' }}
      if noAvatarUrl
        i.fa.fa-check
        p.sub-name {{_ 'default-avatar'}}
  input.hide.js-upload-avatar-input(accept="image/*;capture=camera" type="file")
  if Meteor.settings.public.avatarsUploadMaxSize
    | {{_ 'max-avatar-filesize'}} {{Meteor.settings.public.avatarsUploadMaxSize}}
    br
  if Meteor.settings.public.avatarsUploadMimeTypes
    | {{_ 'allowed-avatar-filetypes'}} {{Meteor.settings.public.avatarsUploadMimeTypes}}
    br
  | {{_ 'invalid-file'}}
  button.full.js-upload-avatar
    i.fa.fa-upload
    | {{_ 'upload-avatar' }}

template(name="deleteAvatarPopup")
  p {{_ 'delete-avatar-confirm'}}
  button.js-confirm.negate.full(type="submit") {{_ 'delete'}}

template(name="cardMemberPopup")
  .board-member-menu
    .mini-profile-info
      +userAvatar(userId=user._id showEdit=true)
      .info
        h3= user.profile.fullname
        p.quiet @{{ user.username }}
    ul.pop-over-list
      unless noRemove
        if currentUser.isNotCommentOnly
          if currentUser.isNotWorker
            li: a.js-remove-member {{_ 'remove-member-from-card'}}

      if $eq currentUser._id user._id
        with currentUser
          li: a.js-edit-profile {{_ 'edit-profile'}}
