.pop-over {
  background: #ededed;
  border-bottom-color: #c2c2c2;
  box-shadow: 0 0.2vh 0.8vh rgba(0, 0, 0, 0.3);
  /* so they can easily travel with mouse */
  position: fixed;
  overflow-x: hidden;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* it is the responsability of inner content to set their own max
  dimensions */
  resize: both;
  pointer-events: all;
  max-height: calc(100vh - 2 * var(--popup-margin));
  margin: var(--popup-margin);

  .content-wrapper {
    width: auto;
    height: auto;
  }

  .content-wrapper >* {
    /* low specificity so that it can be transparently overriden,
    but could have side effects if no display is explicitely specific in inner content */
    display: flex;
    flex: 1;
    flex-direction: column;
    width: auto;
    height: auto;
  }
}

.pop-over hr {
  margin: 0.5vh 0px;
}
.pop-over p,
.pop-over textarea,
.pop-over input[type="text"],
.pop-over input[type="email"],
.pop-over input[type="password"],
.pop-over input[type="file"] {
  display: flex;
  flex: 1;
}
.pop-over .sub-name {
  max-width: clamp(30vw, 500px, 80%);
}
.pop-over textarea {
  min-height: 2lh;
}
.pop-over form a span {
  padding: 0 0.7vw;
}
.pop-over .header {
  display: flex;
  justify-content: space-between;
  gap: 1ch;
  align-items: center;
  padding: 0.5rlh 0.8rlh;
  background: #f7f7f7;
  border-bottom: 1px solid #dcdcdc;
  color: #666;
}
.pop-over .header .header-title {
  display: flex;
  font-weight: bold;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 1.2em;
  flex: 1;
  cursor: grab !important;
}
.pop-over .back-btn {
  float: left;
  overflow: hidden;
  transition: width 0.2s;
}
.pop-over .back-btn.is-hidden {
  width: 0;
}

.pop-over.no-title .header {
  background: none;
}

.pop-over {
  .content-wrapper, .header {
    display: flex;
  }
}

.pop-over:has(.header) .content {
  padding: 1vmin;
}

.popup-placeholder {
  /* This gives relative coordinates but height/width cannot fit the parent's
  without it having position: relative; we need to get them programmatically */
  position: absolute;
  /* Take all size of parent so it can be useful in computations */
  visibility: hidden;
  display: none;
}

.pop-over .content-container {
  display: flex;
  align-items: stretch;
  flex: 1;
}

/* Allow dynamic max-height to override default constraint for content-container */
.pop-over[style*="max-height"] .content-container {
  max-height: inherit;
}

/* Fix overflow in the Member Settings (member menu) popup:
   the popup itself gets a max-height inline style, but the header consumes space.
   Make the header overlay the scrollable area so the list can't spill out. */
.pop-over[data-popup="memberMenuPopup"] {
  overflow: hidden;
}
.pop-over[data-popup="memberMenuPopup"] > .header {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  margin-bottom: 0;
  z-index: 1;
}
.pop-over[data-popup="memberMenuPopup"] > .content-wrapper {
  padding-top: calc(4.5vh + 1vh);
  box-sizing: border-box;
}

/* Admin edit popups: use full height */
.pop-over[data-popup="editUserPopup"],
.pop-over[data-popup="editOrgPopup"],
.pop-over[data-popup="editTeamPopup"] {
  height: calc(100vh - 20px) !important;
  max-height: calc(100vh - 20px) !important;
}

.pop-over[data-popup="editUserPopup"] .content-wrapper,
.pop-over[data-popup="editOrgPopup"] .content-wrapper,
.pop-over[data-popup="editTeamPopup"] .content-wrapper {
  max-height: calc(100vh - 80px) !important; /* Subtract header height */
  height: calc(100vh - 80px) !important;
  overflow-y: auto !important;
}

.pop-over[data-popup="editUserPopup"] .content-container,
.pop-over[data-popup="editOrgPopup"] .content-container,
.pop-over[data-popup="editTeamPopup"] .content-container {
  max-height: calc(100vh - 80px) !important; /* Subtract header height */
  height: calc(100vh - 80px) !important;
}

.pop-over .popup-drag-handle {
  cursor: move;
}

body.mobile-mode  {
  .popup-drag-handle, .close-btn {
    font-size: 1.4em;
  }
  .pop-over:has(.pop-over-list) {
    min-width: 70vw;
  }
}

.pop-over .header-controls {
  display: flex;
  gap: 1ch;
}
.pop-over .pop-over-list {
  display: flex;
  flex-direction: column;
  flex: 1;
  font-size: 1.1rem;
  padding: 0.1lh 0.3ch;
  >li>a {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: fit-content;
    justify-content: start;
    padding: 0.2lh 0;
    column-gap: 1ch;
    .sub-name {
      text-align: end;
    }
  }
}
/* Utility: remove left gutter inside specific popups */
.pop-over .content .flush-left {
  margin-left: 0;
  padding-left: 0;
  width: 100%;
}

/* Swimlane popups: remove left gutter, align content fully left */
.pop-over .content form.swimlane-color-popup,
.pop-over .content .swimlane-height-popup {
  margin-left: 0;
  padding-left: 0;
  width: 100%;
}

/* Color selection popups: ensure proper alignment */
.pop-over .content form.swimlane-color-popup .palette-colors,
.pop-over .content form.edit-label .palette-colors,
.pop-over .content form.create-label .palette-colors {
  margin-left: 0;
  padding-left: 0;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  grid-auto-rows: 1.2lh;
}

/* Color palette items: ensure proper positioning */
.pop-over .content .palette-colors .palette-color {
  margin-left: 0;
  margin-right: 2px;
  margin-bottom: 2px;
}
.pop-over.search-over {
  background: #f0f0f0;
  min-height: 14vh;
}
.pop-over.search-over .header {
  display: none;
}
.pop-over.search-over .content {
  padding: 8px 4px 8px 10px;
  margin-right: 8px;
}
.pop-over .at-form .at-error,
.pop-over .at-form .at-result {
  padding: 8px 12px;
  margin: 0 0 10px 0;
}
.pop-over .at-form .at-error {
  background: #ef9a9a;
}
.pop-over .at-form .at-result {
  background: #b2dfdb;
}
.pop-over .sk-spinner {
  margin: 40px auto;
}
.pop-over .popup-container-depth-1 {
  transform: translateX(-300px);
}
.pop-over .popup-container-depth-2 {
  transform: translateX(-600px);
}
.pop-over .popup-container-depth-3 {
  transform: translateX(-900px);
}
.pop-over .popup-container-depth-4 {
  transform: translateX(-1200px);
}
.pop-over .popup-container-depth-5 {
  transform: translateX(-1500px);
}
.pop-over .popup-container-depth-6 {
  transform: translateX(-1800px);
}
.select-members-list,
.select-avatars-list {
  margin-bottom: 8px;
}
.pop-over-list li {
  display: block;
  clear: both;
}
.pop-over-list li > a {
  clear: both;
  cursor: pointer;
  display: block;
  font-weight: 700;
  position: relative;
  margin: 0;
  text-decoration: none;
  overflow: hidden;
  display:flex;
  align-items: center;
  color: #000 !important;
}
.pop-over-list li > a > .member{
  align-self: flex-start;
  flex:0 0 auto;
}
.pop-over-list li > a .item-name {
  display: block;
  width: auto;
}
.pop-over-list li > a:not(.disabled):hover {
  background-color: #005377;
  color: #fff;
}
.pop-over-list li > a:not(.disabled):hover .sub-name,
.pop-over-list li > a:not(.disabled):hover .quiet {
  color: #eee;
}
.pop-over-list li > a:not(.disabled):hover .unread-indicator {
  background: #fff;
}
.pop-over-list li > a .sub-name {
  color: #8c8c8c;
  display: block;
  font-size: 0.8em;
  font-weight: 400;
  line-height: 1.2em;
}
.pop-over-list li > a.current {
  background-color: #e2e6e9;
}
.pop-over-list li > a:active {
  background-color: #2e85b8;
}
.pop-over-list li > a.disabled {
  color: #8c8c8c;
  cursor: default;
}
.pop-over-list li > a.disabled .vis-icon {
  opacity: 0.35;
}
.pop-over-list li > a.disabled:hover {
  background: none;
}
.pop-over-list li > a.disabled:hover .sub-name,
.pop-over-list li > a.disabled:hover .quiet {
  color: #8c8c8c;
}
.pop-over-list li > a.disabled:active {
  background: none;
}
.pop-over-list.inset li > a {
  border-radius: 3px;
  margin: 0;
}
.pop-over-list .pop-over-list.checkable .fa-check {
  display: none;
  position: absolute;
  top: 6px;
  right: 12px;
  color: #3cb500;
}
.pop-over-list .pop-over-list.checkable li.active a {
  padding-right: 28px;
}
.pop-over-list .pop-over-list.checkable li.active a .fa-check {
  display: block;
}
/* Grey check icons when grey icons setting is enabled */
body.grey-icons-enabled .pop-over-list .pop-over-list.checkable .fa-check {
  color: #7a7a7a;
}