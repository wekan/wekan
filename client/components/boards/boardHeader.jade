template(name="boardHeaderBar")
  h1.header-board-menu
    with currentBoard
      if $eq title 'Templates'
        | {{_ 'templates'}}
      else
        +viewer
          = title

  .board-header-btns.left
    unless isMiniScreen
      if currentBoard
        if currentUser
          with currentBoard
            if currentUser.isBoardAdmin
              a.board-header-btn(class="{{#if currentUser.isBoardAdmin}}js-edit-board-title{{else}}is-disabled{{/if}}" title="{{_ 'edit'}}" value=title)
                | âœï¸

            a.board-header-btn(
              class="{{#if currentUser.isBoardAdmin}}js-change-visibility{{else}}is-disabled{{/if}}"
              title="{{_ currentBoard.permission}}")
              | {{#if currentBoard.isPublic}}ğŸŒ{{else}}ğŸ”’{{/if}}
              span {{_ currentBoard.permission}}

            a.board-header-btn.js-watch-board(
              title="{{_ watchLevel }}")
              if $eq watchLevel "watching"
                | ğŸ‘ï¸
              if $eq watchLevel "tracking"
                | ğŸ””
              if $eq watchLevel "muted"
                | ğŸ”•
              span {{_ watchLevel}}
            a.board-header-btn.js-star-board(title="{{_ 'star-board'}}")
              if isStarred
                | â­
              else
                | â˜†
              if showStarCounter
                span.board-star-counter {{currentBoard.stars}}
            a.board-header-btn(title="{{_ 'sort-cards'}}" class="{{#if isSortActive }}emphasis{{else}} js-sort-cards {{/if}}")
              | {{sortCardsIcon}}
              span {{#if isSortActive }}{{_ 'sort-is-on'}}{{else}}{{_ 'sort-cards'}}{{/if}}
            if isSortActive
              a.board-header-btn-close.js-sort-reset(title="{{_ 'remove-sort'}}")
                | âŒ

        else
          a.board-header-btn.js-log-in(
            title="{{_ 'log-in'}}")
            | ğŸšª
            span {{_ 'log-in'}}

  .board-header-btns.center

  .board-header-btns.right
    if currentBoard
      if isMiniScreen
        if currentUser
          with currentBoard
            a.board-header-btn(class="{{#if currentUser.isBoardAdmin}}js-edit-board-title{{else}}is-disabled{{/if}}" title="{{_ 'edit'}}" value=title)
              | âœï¸

            a.board-header-btn(
              class="{{#if currentUser.isBoardAdmin}}js-change-visibility{{else}}is-disabled{{/if}}"
              title="{{_ currentBoard.permission}}")
              | {{#if currentBoard.isPublic}}ğŸŒ{{else}}ğŸ”’{{/if}}

            a.board-header-btn.js-watch-board(
              title="{{_ watchLevel }}")
              if $eq watchLevel "watching"
                | ğŸ‘ï¸
              if $eq watchLevel "tracking"
                | ğŸ””
              if $eq watchLevel "muted"
                | ğŸ”•
            a.board-header-btn.js-star-board(title="{{_ 'star-board'}}")
              if isStarred
                | â­
              else
                | â˜†
            a.board-header-btn(title="{{_ 'sort-cards'}}" class="{{#if isSortActive }}emphasis{{else}} js-sort-cards {{/if}}")
              | {{sortCardsIcon}}
            if isSortActive
              a.board-header-btn-close.js-sort-reset(title="{{_ 'remove-sort'}}")
                | âŒ

        else
          a.board-header-btn.js-log-in(
            title="{{_ 'log-in'}}")
            | ğŸšª

      if isSandstorm
        if currentUser
          a.board-header-btn.js-open-archived-board
            | ğŸ“¦

      //if showSort
      //  a.board-header-btn.js-open-sort-view(title="{{_ 'sort-desc'}}")
      //    i.fa(class="{{directionClass}}")
      //    span {{_ 'sort'}}{{_ listSortShortDesc}}

      a.board-header-btn.js-open-filter-view(
          title="{{#if Filter.isActive}}{{_ 'filter-on-desc'}}{{else}}{{_ 'filter'}}{{/if}}"
          class="{{#if Filter.isActive}}emphasis{{/if}}")
        | ğŸ”½
        if Filter.isActive
          a.board-header-btn-close.js-filter-reset(title="{{_ 'filter-clear'}}")
            | âŒ

      a.board-header-btn.js-open-search-view(title="{{_ 'search'}}")
        | ğŸ”

      unless currentBoard.isTemplatesBoard
        a.board-header-btn.js-toggle-board-view(
          title="{{_ 'board-view'}}")
          | â–¼
          if $eq boardView 'board-view-swimlanes'
            | ğŸŠ
          if $eq boardView 'board-view-lists'
            | ğŸ“‹
          if $eq boardView 'board-view-cal'
            | ğŸ“…

      if canModifyBoard
        a.board-header-btn.js-multiselection-activate(
            title="{{#if MultiSelection.isActive}}{{_ 'multi-selection-on'}}{{else}}{{_ 'multi-selection'}}{{/if}}"
            class="{{#if MultiSelection.isActive}}emphasis{{/if}}")
          | â˜‘ï¸
        if MultiSelection.isActive
          a.board-header-btn-close.js-multiselection-reset(title="{{_ 'filter-clear'}}")
            | âŒ

      .separator
      a.board-header-btn.js-toggle-sidebar(title="{{_ 'sidebar-open'}} {{_ 'or'}} {{_ 'sidebar-close'}}")
        | â˜°

template(name="boardVisibilityList")
  ul.pop-over-list
    li
      with "private"
        a.js-select-visibility
          | ğŸ”’
          | {{_ 'private'}}
          if visibilityCheck
            | âœ…
          span.sub-name {{_ 'private-desc'}}
    if notAllowPrivateVisibilityOnly
      li
        with "public"
          a.js-select-visibility
            | ğŸŒ
            | {{_ 'public'}}
            if visibilityCheck
              | âœ…
            span.sub-name {{_ 'public-desc'}}

template(name="boardChangeVisibilityPopup")
  +boardVisibilityList

template(name="boardChangeWatchPopup")
  ul.pop-over-list
    li
      with "watching"
        a.js-select-watch
          | ğŸ‘ï¸
          | {{_ 'watching'}}
          if watchCheck
            | âœ…
          span.sub-name {{_ 'watching-info'}}
    li
      with "tracking"
        a.js-select-watch
          | ğŸ””
          | {{_ 'tracking'}}
          if watchCheck
            | âœ…
          span.sub-name {{_ 'tracking-info'}}
    li
      with "muted"
        a.js-select-watch
          | ğŸ”•
          | {{_ 'muted'}}
          if watchCheck
            | âœ…
          span.sub-name {{_ 'muted-info'}}

template(name="boardChangeViewPopup")
  ul.pop-over-list
    li
      with "board-view-swimlanes"
        a.js-open-swimlanes-view
          | ğŸŠ
          | {{_ 'board-view-swimlanes'}}
          if $eq Utils.boardView "board-view-swimlanes"
            | âœ…
    li
      with "board-view-lists"
        a.js-open-lists-view
          | ğŸ“‹
          | {{_ 'board-view-lists'}}
          if $eq Utils.boardView "board-view-lists"
            | âœ…
    li
      with "board-view-cal"
        a.js-open-cal-view
          | ğŸ“…
          | {{_ 'board-view-cal'}}
          if $eq Utils.boardView "board-view-cal"
            | âœ…

template(name="createBoard")
  form
    label
      | {{_ 'title'}}
      input.js-new-board-title(type="text" placeholder="{{_ 'bucket-example'}}" autofocus required)
    if visibilityMenuIsOpen.get
      +boardVisibilityList
    else
      p.quiet
        if $eq visibility.get 'public'
          span ğŸŒ
          = " "
          | {{{_ 'board-public-info'}}}
        else
          span ğŸ”’
          = " "
          | {{{_ 'board-private-info'}}}
        a.js-change-visibility {{_ 'change'}}.
    a.flex.js-toggle-add-template-container
      .materialCheckBox#add-template-container
      span {{_ 'add-template-container'}}
    input.primary.wide(type="submit" value="{{_ 'create'}}")
    span.quiet
      | {{_ 'or'}}
      a.js-import-board {{_ 'import'}}
    span.quiet
      | /
      a.js-board-template {{_ 'template'}}

template(name="createBoardPopup")
  form
    label
      | {{_ 'title'}}
      input.js-new-board-title(type="text" placeholder="{{_ 'bucket-example'}}" autofocus required)
    if visibilityMenuIsOpen.get
      +boardVisibilityList
    else
      p.quiet
        if $eq visibility.get 'public'
          span ğŸŒ
          = " "
          | {{{_ 'board-public-info'}}}
        else
          span ğŸ”’
          = " "
          | {{{_ 'board-private-info'}}}
        a.js-change-visibility {{_ 'change'}}.
    a.flex.js-toggle-add-template-container
      .materialCheckBox#add-template-container
      span {{_ 'add-template-container'}}
    input.primary.wide(type="submit" value="{{_ 'create'}}")
    span.quiet
      | {{_ 'or'}}
      a.js-import-board {{_ 'import'}}
    span.quiet
      | /
      a.js-board-template {{_ 'template'}}

// New popup for Template Container creation; shares the same form content
template(name="createTemplateContainerPopup")
  form
    label
      | {{_ 'title'}}
      input.js-new-board-title(type="text" placeholder="{{_ 'bucket-example'}}" autofocus required)
    if visibilityMenuIsOpen.get
      +boardVisibilityList
    else
      p.quiet
        if $eq visibility.get 'public'
          span ğŸŒ
          = " "
          | {{{_ 'board-public-info'}}}
        else
          span ğŸ”’
          = " "
          | {{{_ 'board-private-info'}}}
        a.js-change-visibility {{_ 'change'}}.
    a.flex.js-toggle-add-template-container
      .materialCheckBox#add-template-container
      span {{_ 'add-template-container'}}
    input.primary.wide(type="submit" value="{{_ 'create'}}")
    span.quiet
      | {{_ 'or'}}
      a.js-import-board {{_ 'import'}}
    span.quiet
      | /
      a.js-board-template {{_ 'template'}}

//template(name="listsortPopup")
//  h2
//   | {{_ 'list-sort-by'}}
//  hr
//  ul.pop-over-list
//    each value in allowedSortValues
//     li
//      a.js-sort-by(name="{{value.name}}")
//        if $eq sortby value.name
//           | {{#if $eq Direction "fa-arrow-up"}}â¬†ï¸{{else}}â¬‡ï¸{{/if}}
//        | {{_ value.label }}{{_ value.shortLabel}}
//        if $eq sortby value.name
//           | âœ…

template(name="boardChangeTitlePopup")
  form
    label
      | {{_ 'title'}}
      input.js-board-name(type="text" value=title autofocus dir="auto")
    label
      | {{_ 'description'}}
      textarea.js-board-desc(dir="auto")= description
    input.primary.wide(type="submit" value="{{_ 'rename'}}")

template(name="boardCreateRulePopup")
  p {{_ 'close-board-pop'}}
  button.js-confirm.negate.full(type="submit") {{_ 'archive'}}


template(name="cardsSortPopup")
  ul.pop-over-list
    li
      a.js-sort-due
        | ğŸ“…
        | {{_ 'due-date'}}
      hr
    li
      a.js-sort-title
        | ğŸ”¤
        | {{_ 'title-alphabetically'}}
      hr
    li
      a.js-sort-created-desc
        | â¬‡ï¸
        | {{_ 'created-at-newest-first'}}
      hr
    li
      a.js-sort-created-asc
        | â¬†ï¸
        | {{_ 'created-at-oldest-first'}}

