template(name="board")
  if isBoardReady.get
    if currentBoard
      if onlyShowCurrentCard
        +cardDetails(currentCard)
      else
        +boardBody
    else
      //- XXX We need a better error message in case the board has been archived
      +message(label="board-not-found")
  else
    +spinner

template(name="boardBody")
  .board-wrapper(class=currentBoard.colorClass)
    +sidebar
    .board-canvas.js-swimlanes.js-perfect-scrollbar(
      class="{{#if Sidebar.isOpen}}is-sibling-sidebar-open{{/if}}"
      class="{{#if MultiSelection.isActive}}is-multiselection-active{{/if}}"
      class="{{#if draggingActive.get}}is-dragging-active{{/if}}")
      if showOverlay.get
        .board-overlay
      if isViewSwimlanes
        .swimlanetop
        each currentBoard.lists
          .div
          +listHeader(this)
        each currentBoard.swimlanes
          +swimlane(this)
      if isViewLists
        +listsGroup
